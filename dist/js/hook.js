function hook_client(a,e,t){var e=$(e),s="";$.each(a.client,function(e){var i=a.client[e].data,o=a.client[e].time,c=a.client[e].url.replace("/","");s+="<div class='w-card' ",e>t&&(s+="style='display:none'"),s+="><div class='w-avatar'><img src='";var r=RegExp("http").test(i.user.avatar);s+=r?i.user.avatar:"https://coding.net"+i.user.avatar,s+="'></div><div class='w-box'><div class='w-title'>"+i.event+":<a href='"+i.repository.web_url+"'>"+i.repository.name+"</a></div><div class='w-time'><span>"+i.ref.split("/")[2]+"</span>"+o+"</div>";for(e in i.commits)s+="<a class='w-message' href='"+i.commits[e].web_url+"'>"+i.commits[e].short_message+"</a><div class='w-author'>committer: <span>"+i.commits[e].committer.name+"</span></div>";s+="</div>";for(var e=0;e<projects.length;e++)c==projects[e]&&(s+="<div class='auto-build'>客户端更新</div>");s+="</div>"}),s||(s="<div class='w-card w-null'>暂无数据</div>"),e.html(s)}function hook_webhook(a,e,t){var e=$(e),s="";$.each(a.webhook,function(e){var i=a.webhook[e].data,o=a.webhook[e].time,c=a.webhook[e].url.replace("/","");s+="<div class='w-card' ",e>t&&(s+="style='display:none'"),s+="><div class='w-avatar'><img src='";var r=RegExp("http").test(i.user.avatar);s+=r?i.user.avatar:"https://coding.net"+i.user.avatar,s+="'></div><div class='w-box'><div class='w-title'>"+i.event+":<a href='"+i.repository.web_url+"'>"+i.repository.name+"</a></div><div class='w-time'><span>"+i.ref.split("/")[2]+"</span>"+o+"</div>";for(e in i.commits)s+="<a class='w-message' href='"+i.commits[e].web_url+"'>"+i.commits[e].short_message+"</a><div class='w-author'>committer: <span>"+i.commits[e].committer.name+"</span></div>";s+="</div>";for(var e=0;e<projects.length;e++)c==projects[e]&&(s+="<div class='auto-build'>自动部署</div>");s+="</div>"}),s||(s="<div class='w-card w-null'>暂无数据</div>"),e.html(s)}var projects=["client","server","hook","website"];$(function(){$.getJSON("//hook.canisminor.cc/",function(a){hook_client(a,"#client",3),hook_webhook(a,"#webhook",3)}),$("#clientShow").on("click",function(){$("#client .w-card").hide()}),$("#webhookShow").on("click",function(){$("#webhook .w-card").hide()})});
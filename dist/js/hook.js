function hook_client(a,t,e){var t=$(t),s="",i=e-1;i<a.client.length&&(i=a.client.length);for(var r=0;r<i;r++){var o=a.client[r].data,c=a.client[r].time,v=a.client[r].url.replace("/","");s+="<div class='w-card'><div class='w-avatar'><img src='";var l=RegExp("http").test(o.user.avatar);s+=l?o.user.avatar:"https://coding.net"+o.user.avatar,s+="'></div><div class='w-box'><div class='w-title'>"+o.event+":<a href='"+o.repository.web_url+"'>"+o.repository.name+"</a></div><div class='w-time'><span>"+o.ref.split("/")[2]+"</span>"+c+"</div>";for(r in o.commits)s+="<a class='w-message' href='"+o.commits[r].web_url+"'>"+o.commits[r].short_message+"</a><div class='w-author'>committer: <span>"+o.commits[r].committer.name+"</span></div>";s+="</div>";for(var r=0;r<projects.length;r++)v==projects[r]&&(s+="<div class='auto-build'>客户端更新</div>");s+="</div>"}s||(s="<div class='w-card w-null'>暂无数据</div>"),t.html(s)}function hook_webhook(a,t,e){var t=$(t),s="",i=e-1;i<a.webhook.length&&(i=a.webhook.length);for(var r=0;r<i;r++){var o=a.webhook[r].data,c=a.webhook[r].time,v=a.webhook[r].url.replace("/","");s+="<div class='w-card'><div class='w-avatar'><img src='";var l=RegExp("http").test(o.user.avatar);s+=l?o.user.avatar:"https://coding.net"+o.user.avatar,s+="'></div><div class='w-box'><div class='w-title'>"+o.event+":<a href='"+o.repository.web_url+"'>"+o.repository.name+"</a></div><div class='w-time'><span>"+o.ref.split("/")[2]+"</span>"+c+"</div>";for(r in o.commits)s+="<a class='w-message' href='"+o.commits[r].web_url+"'>"+o.commits[r].short_message+"</a><div class='w-author'>committer: <span>"+o.commits[r].committer.name+"</span></div>";s+="</div>";for(var r=0;r<projects.length;r++)v==projects[r]&&(s+="<div class='auto-build'>自动部署</div>");s+="</div>"}s||(s="<div class='w-card w-null'>暂无数据</div>"),t.html(s)}var projects=["client","server","hook","website"];$(function(){$.getJSON("//hook.canisminor.cc/",function(a){hook_client(a,"div#client",3),hook_webhook(a,"div#webhook",3)})});
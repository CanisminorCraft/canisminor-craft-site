function hook_client(a,t,s){var t=$(t),i="";$.each(a.client,function(t){var e=a.client[t].data,o=a.client[t].time,c=a.client[t].url.replace("/","");i+="<div class='w-card' ",t>s&&(i+="style='display:none'"),i+="><div class='w-avatar'><img src='";var r=RegExp("http").test(e.user.avatar);i+=r?e.user.avatar:"https://coding.net"+e.user.avatar,i+="'></div><div class='w-box'><div class='w-title'>"+e.event+":<a href='"+e.repository.web_url+"'>"+e.repository.name+"</a></div><div class='w-time'><span>"+e.ref.split("/")[2]+"</span>"+o+"</div>";for(t in e.commits)i+="<a class='w-message' href='"+e.commits[t].web_url+"'>"+e.commits[t].short_message+"</a><div class='w-author'>committer: <span>"+e.commits[t].committer.name+"</span></div>";i+="</div>";for(var t=0;t<projects.length;t++)c==projects[t]&&(i+="<div class='auto-build'>客户端更新</div>");i+="</div>"}),i||(i="<div class='w-card w-null'>暂无数据</div>"),t.html(i)}function hook_webhook(a,t,s){var t=$(t),i="";$.each(a.webhook,function(t){var e=a.webhook[t].data,o=a.webhook[t].time,c=a.webhook[t].url.replace("/","");i+="<div class='w-card' ",t>s&&(i+="style='display:none'"),i+="><div class='w-avatar'><img src='";var r=RegExp("http").test(e.user.avatar);i+=r?e.user.avatar:"https://coding.net"+e.user.avatar,i+="'></div><div class='w-box'><div class='w-title'>"+e.event+":<a href='"+e.repository.web_url+"'>"+e.repository.name+"</a></div><div class='w-time'><span>"+e.ref.split("/")[2]+"</span>"+o+"</div>";for(t in e.commits)i+="<a class='w-message' href='"+e.commits[t].web_url+"'>"+e.commits[t].short_message+"</a><div class='w-author'>committer: <span>"+e.commits[t].committer.name+"</span></div>";i+="</div>";for(var t=0;t<projects.length;t++)c==projects[t]&&(i+="<div class='auto-build'>自动部署</div>");i+="</div>"}),i||(i="<div class='w-card w-null'>暂无数据</div>"),t.html(i)}var projects=["client","server","hook","website"];$("#clientShow").click(function(){$("#client .w-card").show()}),$(function(){$.getJSON("//hook.canisminor.cc/",function(a){hook_client(a,"#client",3),hook_webhook(a,"#webhook",3)}),$("#clientShow").click(function(){$("#client .w-card").css("display","block !important")}),$("#webhookShow").click(function(){$("#webhook .w-card").css("display","block !important")})});
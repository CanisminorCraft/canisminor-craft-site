function getMinecraftTime(s){s=parseInt(s);var e=s>=0&&s<13700;return{servertime:s,days:parseInt((s+8e3)/24e3),hours:(parseInt(s/1e3)+6)%24,minutes:parseInt(s/1e3%1*60),seconds:parseInt(s/1e3%1*60%1*60),day:e,night:!e}}function CheckImgExists(s){var e=new ActiveXObject("Microsoft.XMLHTTP");return e.open("Get",s,!1),e.send(),404!=e.status}$(function(){var s=$("#server"),e="";$.getJSON("http://map.canisminor.cc/up/world/world/",function(a){var i=getMinecraftTime(a.servertime),n=i.hours+":"+i.minutes+":"+i.seconds;if(e+="<div class='w-card'><div class='w-avatar'><img src='//canisminor.cc/img/logo.png'></div><div class='w-box'><div class='w-title'>Server:<a href='/pages/map.html'>Canisminor Craft</a></div><div class='w-time'><span>"+a.currentcount+"/20</span>"+n+"</div>",e+="<div class='w-message'></div>",e+="<div class='p-card'>",e+="<div class='p-oneline'>在线玩家:<span>"+a.currentcount+"</span>人</div>",a.currentcount>0)for(var t=0;t<a.players.length;t++){e+="<div class='p-box'>";var r="http://map.canisminor.cc/tiles/faces/32x32/"+a.players[t].name.replace(/\[(.*)\]/,"")+".png";console.log(r),console.log(CheckImgExists(r)),e+=CheckImgExists(r)?"<div class='p-avata'><img src='"+r+"'></div>":"<div class='p-avata'><img src='http://www.canisminor.cc/img/dynmap/player.png'></div>",e+="<div class='p-content'>",e+="<div class='p-name'>"+a.players[t].name;var c="x:"+a.players[t].x+" y:"+a.players[t].y+" z:"+a.players[t].z;e+="<span>"+c+"</span>",e+="</div>",e+="</div>",e+="</div>"}e+="</div>",e+=a?"<div class='auto-build'>Online</div>":"<div class='auto-build offline'>Offline</div>",e+="</div>",s.html(e),$("#server .w-message").text($("#content .version").text())})});
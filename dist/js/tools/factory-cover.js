function convertImgToBase64(o,c,a){var e=document.createElement("CANVAS"),l=e.getContext("2d"),t=new Image;t.crossOrigin="Anonymous",t.onload=function(){e.height=t.height,e.width=t.width,l.drawImage(t,0,0);var o=e.toDataURL(a||"image/png");c.call(this,o),e=null},t.src=o}var default_color=["ff5b62","ff6c3d","ff983d","ffbc1c","95ce5d","5dce89","5dceba","88d5ec","88b7ec","5090b5","5068b5","9360be","be60b1","c84973"];$("#color-bg").colorPicker({colors:default_color}),$("#color-tag").colorPicker({colors:default_color}),$(function(){$("#select-week").change(function(){var o,c=$(this).children("option:selected").val();switch(c){case"1":$("#tag-title").val("二发涨姿势"),$("#color-bg").val("#BE60B1"),$("#color-tag").val("#5DCE89"),o="1";break;case"2":$("#tag-title").val("二发带你飞"),$("#color-bg").val("#88d5ec"),$("#color-bg").change,$("#color-tag").val("#ffbc1c"),o="2";break;case"3":$("#tag-title").val("二发说个事"),$("#color-bg").val("#FFBC1C"),$("#color-tag").val("#FF6C3D"),o="3";break;case"4":$("#tag-title").val("二发扯着淡"),$("#color-bg").val("#FF5B62"),$("#color-tag").val("#5090B5"),o="4";break;case"5":$("#tag-title").val("二发说"),$("#color-bg").val("#ff6c3d"),$("#color-tag").val("#ffbc1c"),o="1"}$("#color-bg").change(),$("#color-tag").change(),$("#tag-title").change(),$("#tag").html($("#tag-title").val()),$("#cover-bg").css("background-image","url(/img/tools/emo/"+o+".png)"),$("#cover").css("background-color",$("#color-bg").val()),$("#cover-content").css("background-color",$("#color-bg").val()),$("#tag").css("background-color",$("#color-tag").val())}),$("#select-week").change(),$("#cover").css("background-color",$("#color-bg").val()),$("#cover-content").css("background-color",$("#color-bg").val()),$("#tag").css("background-color",$("#color-tag").val()),$(".colorPicker-swatch").click(function(){$("#cover").css("background-color",$("#color-bg").val()),$("#cover-content").css("background",$("#color-bg").val()),$("#tag").css("background-color",$("#color-tag").val())}),$("#tag-title").bind("input propertychange",function(){$("#tag").html($(this).val())}),$("#title").bind("input propertychange",function(){$("#cover-content").html($(this).val())})}),$("#cover-upload").change(function(o){$(".group").show();var c=document.getElementById("cover-upload"),a=window.URL.createObjectURL(c.files[0]);convertImgToBase64(a,function(o){$("#cover-bg").css("background-image","url("+o+")").css("background-size","auto 400px")}),o.preventDefault()});